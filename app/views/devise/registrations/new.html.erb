<div class="container">
  <div class="row" >
    <div class="col-xs-12 col-sm-6 col-sm-offset-3">
      <div class="form-login">
          <%= link_to root_path, class: "navbar-wagon-brand" do %>
          <h2><%= image_tag "logo.png", class:"logo-icon"%></h2>
          <% end %>
          <h2>Register</h2>
          <p>Please fill in this form to create an account.</p>
          <hr>
        <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
          <%= f.error_notification %>
          <div class="avatar-upload">
            <div class="avatar-edit">

            <%= f.input :avatar,
                        required: true,
                        autofocus: true ,
                        label: false,
                        wrapper: false,
                        input_html: { type: 'file', id: "user_avatar", accept: ".png, .jpg, .jpeg", name: "user[avatar]", class: "{{ $errors->has('email') ? 'alert alert-danger' : '' }} required file form-control-file is-valid" }%>

                <label for="user_avatar"></label>
            </div>
            <div class="avatar-preview container2">
              <% if current_user.nil? %>
                <% avatar = image_path("default_avatar.png") %>
              <% else %>
                <% avatar = cl_image_path(current_user.avatar) %>
              <% end %>
                <div id="imagePreview" style="background-image: url(<%= avatar %>);">
                    <input type="hidden" name="_token" value="{{csrf_token()}}">
                </div>
            </div>
          </div>
          <div class="form-inputs">
            <%= f.input :email,
                        required: true,
                        autofocus: true ,
                        input_html: { autocomplete: "email" }, placeholder: "Enter Email"%>
            <%= f.input :username,
                        required: true,
                        autofocus: true ,
                        input_html: { autocomplete: "username", placeholder: "Enter Username" }%>
            <%= f.input :fistname,
                        required: true,
                        autofocus: true ,
                        input_html: { autocomplete: "fistname", placeholder: "Enter your Firstname"  }%>
            <%= f.input :lastname,
                        required: true,
                        autofocus: true ,
                        input_html: { autocomplete: "lastname", placeholder: "Enter your Lastname"  }%>
            <%= f.input :avatar_cache, as: :hidden, input_html: { class: 'form-control'} %>
            <%= f.input :password,
                        required: true,
                        hint: ("#{@minimum_password_length} characters minimum" if @minimum_password_length),
                        input_html: { autocomplete: "new-password" }, placeholder: "Enter Password"  %>
            <%= f.input :password_confirmation,
                        required: true,
                        input_html: { autocomplete: "new-password" }, placeholder: "Repeat Password"  %>
             <%= f.input :address,
                        required: true,
                        autofocus: true ,
                        input_html: { autocomplete: "address", placeholder: "Enter your address" , id: "address" }%>
          </div>

          <div class="form-actions">
            <%= f.button :submit, "Sign up", class:"btn own-button"  %>
            <%= link_to "Back", :back  , class: "own-links"%>
          </div>
        <% end %>

        <%= render "devise/shared/links" %>
      </div>

    </div>
  </div>
</div>








